#!/usr/bin/env node

var rogue = require('../src/main.js'),
    commander = require('commander'),
    updateNotifier = require('update-notifier'),
    pkg = require('../package.json'),
    exitCode = 0;

updateNotifier({ pkg: pkg })
    .notify({ defer: false });

commander
    .version(pkg.version)
    .description(pkg.description)
    .usage('[options]')
    .option('-c, --config <file>', 'configuration file');

commander.parse(process.argv);
commander.cli = true;

// console.log(commander.config);

try {
    var instance = new rogue();
    instance.lint();
} catch(ex) {
    exitCode = 1;
    console.error(ex.stack);
}

process.on('exit', function () {
    process.exit(exitCode);
});
